<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TR: LandLord Studio</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
    body { background: #1a1a1a; color: #fff; }

    /* Login screen */
    #login {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: linear-gradient(to bottom, #c00, #1a1a1a);
    }
    .login-box {
      background: #000;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 10px #000;
      text-align: center;
      width: 300px;
    }
    .login-box h2 { margin-bottom: 20px; }
    .login-box input {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border: none;
      border-radius: 5px;
    }
    .login-box button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      background: #c00;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1em;
    }
    .login-box button:hover { background: #a00; }
    .error { color: red; font-size: 0.9em; }

    /* Portal Layout */
    #portal { display: none; }
    header {
      background: #000;
      padding: 15px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    header img.logo {
      height: 50px;
    }
    nav {
      display: flex;
      gap: 20px;
    }
    nav a {
      color: #fff;
      text-decoration: none;
      padding: 10px 15px;
      border-radius: 5px;
      transition: background 0.3s;
    }
    nav a:hover, nav a.active {
      background: #c00;
    }
    section {
      display: none;
      padding: 40px;
    }
    section.active { display: block; }
    form input, form select, form textarea {
      display: block;
      margin: 10px 0;
      padding: 10px;
      width: 100%;
      border-radius: 5px;
      border: none;
    }
    form button {
      padding: 10px 20px;
      background: #c00;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    form button:hover { background: #a00; }
    ul { list-style: none; margin-top: 15px; }
    li { background: #333; padding: 10px; margin: 10px 0; border-radius: 5px; }
    .entry-actions button {
      margin-left: 10px;
      background: #555;
    }
    .entry-actions button:hover {
      background: #777;
    }
  </style>
</head>
<body>

  <!-- LOGIN SCREEN -->
  <div id="login">
    <div class="login-box">
      <h2>Admin Login</h2>
      <p id="error" class="error"></p>
      <input type="email" id="email" placeholder="Email" required>
      <input type="password" id="password" placeholder="Password" required>
      <button onclick="checkLogin()">Login</button>
    </div>
  </div>

  <!-- PORTAL -->
  <div id="portal">
    <header>
      <img src="redfox (3).png" class="logo" alt="Teske Realty Logo">
      <nav>
        <a href="#" onclick="showTab('dashboard')">Dashboard</a>
        <a href="#" onclick="showTab('repairs')">Repair Requests</a>
        <a href="#" onclick="showTab('payments')">Rental Payment History</a>
        <a href="#" onclick="showTab('properties')">Properties</a>
        <a href="#" onclick="showTab('tenants')">Tenants</a>
        <a href="#" onclick="showTab('contracts')">Contracts</a>
        <a href="#" onclick="showTab('taxes')">Taxes</a>
      </nav>
    </header>

    <!-- Dashboard -->
    <section id="dashboard" class="active">
      <h1>Dashboard</h1>
      <ul>
        <li>Total Repair Requests: <span id="repairCount">0</span></li>
        <li>Last Rental Payment: <span id="lastPayment">None</span></li>
        <li>Total Properties: <span id="propertyCount">0</span></li>
        <li>Total Tenants: <span id="tenantCount">0</span> (<span id="tenantNames">-</span>)</li>
        <li>Active Contracts: <span id="contractCount">0</span></li>
        <li>Tax Records: <span id="taxCount">0</span></li>
      </ul>
    </section>

    <!-- Repairs -->
    <section id="repairs">
      <h1>Repair Requests</h1>
      <form id="repairForm">
        <input type="text" id="repairDetails" placeholder="Repair details" required>
        <input type="datetime-local" id="repairDate" required>
        <select id="repairStatus">
          <option>Not Started</option>
          <option>In Progress</option>
          <option>Complete</option>
        </select>
        <input type="file" id="repairFile" accept=".jpg,.jpeg,.png,.pdf" multiple>
        <button type="submit">Save</button>
      </form>
      <ul id="repairList"></ul>
    </section>

    <!-- Payments -->
    <section id="payments">
      <h1>Rental Payment History</h1>
      <form id="paymentForm">
        <input type="text" id="paymentDetails" placeholder="Payment details" required>
        <input type="date" id="paymentDate" required>
        <input type="file" id="paymentFile" accept=".jpg,.jpeg,.png,.pdf" multiple>
        <button type="submit">Save</button>
      </form>
      <ul id="paymentList"></ul>
    </section>

    <!-- Properties -->
    <section id="properties">
      <h1>Properties</h1>
      <form id="propertyForm">
        <input type="text" id="propertyDetails" placeholder="Property details" required>
        <input type="file" id="propertyFile" accept=".jpg,.jpeg,.png,.pdf" multiple>
        <button type="submit">Save</button>
      </form>
      <ul id="propertyList"></ul>
    </section>

    <!-- Tenants -->
    <section id="tenants">
      <h1>Tenants</h1>
      <form id="tenantForm">
        <input type="text" id="tenantName" placeholder="Tenant name" required>
        <input type="file" id="tenantFile" accept=".jpg,.jpeg,.png,.pdf" multiple>
        <button type="submit">Save</button>
      </form>
      <ul id="tenantList"></ul>
    </section>

    <!-- Contracts -->
    <section id="contracts">
      <h1>Contracts</h1>
      <form id="contractForm">
        <input type="text" id="contractDetails" placeholder="Contract details" required>
        <input type="file" id="contractFile" accept=".jpg,.jpeg,.png,.pdf" multiple>
        <button type="submit">Save</button>
      </form>
      <ul id="contractList"></ul>
    </section>

    <!-- Taxes -->
    <section id="taxes">
      <h1>Taxes</h1>
      <form id="taxForm">
        <input type="text" id="taxDetails" placeholder="Tax expense or note" required>
        <input type="file" id="taxFile" accept=".jpg,.jpeg,.png,.pdf" multiple>
        <button type="submit">Save</button>
      </form>
      <ul id="taxList"></ul>
    </section>
  </div>

  <script>
    // Hardcoded credentials
    const ADMIN_EMAIL = "teskerealtygroup@gmail.com";
    const ADMIN_PASS = "admin";

    function checkLogin() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      if (email === ADMIN_EMAIL && password === ADMIN_PASS) {
        document.getElementById("login").style.display = "none";
        document.getElementById("portal").style.display = "block";
      } else {
        document.getElementById("error").textContent = "Invalid email or password!";
      }
    }

    function showTab(tabId) {
      document.querySelectorAll("section").forEach(sec => sec.classList.remove("active"));
      document.getElementById(tabId).classList.add("active");

      document.querySelectorAll("nav a").forEach(link => link.classList.remove("active"));
      event.target.classList.add("active");
      updateDashboard();
    }

    // Store data
    let repairs = [];
    let payments = [];
    let properties = [];
    let tenants = [];
    let contracts = [];
    let taxes = [];

    // Generic add/edit/delete handler
    function createListHandler(formId, listId, array, fields) {
      document.getElementById(formId).addEventListener("submit", e => {
        e.preventDefault();
        const entry = {};
        fields.forEach(f => {
          let input = document.getElementById(f);
          entry[f] = input.type === "file" ? Array.from(input.files).map(file => file.name) : input.value;
          input.value = "";
        });
        array.push(entry);
        renderList(listId, array, fields);
        updateDashboard();
      });

      function renderList(listId, array, fields) {
        const ul = document.getElementById(listId);
        ul.innerHTML = "";
        array.forEach((entry, index) => {
          const li = document.createElement("li");
          li.innerHTML = fields.map(f => `<strong>${f}:</strong> ${Array.isArray(entry[f]) ? entry[f].join(", ") : entry[f]}`).join("<br>");
          const actions = document.createElement("div");
          actions.className = "entry-actions";
          const editBtn = document.createElement("button");
          editBtn.textContent = "Edit";
          editBtn.onclick = () => {
            fields.forEach(f => {
              let input = document.getElementById(f);
              if (input.type !== "file") input.value = entry[f];
            });
            array.splice(index, 1);
            renderList(listId, array, fields);
          };
          const delBtn = document.createElement("button");
          delBtn.textContent = "Delete";
          delBtn.onclick = () => {
            array.splice(index, 1);
            renderList(listId, array, fields);
            updateDashboard();
          };
          actions.appendChild(editBtn);
          actions.appendChild(delBtn);
          li.appendChild(actions);
          ul.appendChild(li);
        });
      }
    }

    // Hook forms
    createListHandler("repairForm", "repairList", repairs, ["repairDetails","repairDate","repairStatus","repairFile"]);
    createListHandler("paymentForm", "paymentList", payments, ["paymentDetails","paymentDate","paymentFile"]);
    createListHandler("propertyForm", "propertyList", properties, ["propertyDetails","propertyFile"]);
    createListHandler("tenantForm", "tenantList", tenants, ["tenantName","tenantFile"]);
    createListHandler("contractForm", "contractList", contracts, ["contractDetails","contractFile"]);
    createListHandler("taxForm", "taxList", taxes, ["taxDetails","taxFile"]);

    // Dashboard updater
    function updateDashboard() {
      document.getElementById("repairCount").textContent = repairs.length;
      document.getElementById("lastPayment").textContent = payments.length ? payments[payments.length-1].paymentDetails + " (" + payments[payments.length-1].paymentDate + ")" : "None";
      document.getElementById("propertyCount").textContent = properties.length;
      document.getElementById("tenantCount").textContent = tenants.length;
      document.getElementById("tenantNames").textContent = tenants.length ? tenants.map(t=>t.tenantName).join(", ") : "-";
      document.getElementById("contractCount").textContent = contracts.length;
      document.getElementById("taxCount").textContent = taxes.length;
    }
  </script>

</body>
</html>
